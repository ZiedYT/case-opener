<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Game Case Opener</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Custom CSS (Assumes style.css is in the same directory) -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen p-4 sm:p-8">

    <!-- Login Button (Top Left) -->
    <div class="fixed top-4 left-4 z-50 flex gap-2">
        <button id="login-btn" onclick="showLoginModal()" class="px-4 py-2 text-white font-semibold">
            Login
        </button>
        <button id="settings-btn" onclick="goToSettings()" class="hidden px-4 py-2 text-white font-semibold">
            ⚙️ Settings
        </button>
    </div>

    <div class="main-layout">
        <!-- Available Items List (Full Height Left Sidebar) -->
        <div class="available-items-panel">
            <h3 class="text-lg font-semibold text-white mb-3">Available Items</h3>
            <div id="available-items-list" class="available-items-list space-y-2">
                <p class="text-gray-500 text-sm italic">Select a case to view items</p>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content-center">
            <!-- Case Selection Area -->
            <div id="case-selection-container" class="flex flex-wrap justify-center gap-3 mb-3 flex-shrink-0">
                <!-- Cases will be dynamically loaded from Firebase -->
                <p class="text-gray-400 italic text-sm">Loading cases...</p>
            </div>

            <!-- Selected Case and Roller Area -->
            <div class="p-3 bg-gray-900 flex-shrink-0 roller-parent-container">
                <!-- Roller Mechanism -->
                <div class="roller-window mx-auto">
                    <div class="indicator"></div>
                    <div id="raffle-roller-container" class="raffle-roller-container">
                        <!-- Items will be generated here by script.js -->
                    </div>
                </div>

                <!-- Controls and Result -->
                <div class="flex flex-col sm:flex-row justify-center items-center mt-3 space-y-2 sm:space-y-0 sm:space-x-4">
                    <button id="open-case-btn" 
                            class="px-8 py-3 font-bold disabled:cursor-not-allowed"
                            onclick="startRoll()" disabled>
                        Open Case
                    </button>
                    <div id="rolled-result" class="text-xl font-mono text-center mt-2 sm:mt-0" style="color: rgb(25, 179, 81);"></div>
                </div>
                <div id="case-description" class="case-description-box"></div>
            </div>
        </div>

        <!-- Inventory Panel (Full Height Right Sidebar) -->
        <div class="inventory-panel">
            <h3 class="text-lg font-semibold text-white mb-3">Your Inventory</h3>
            <div id="inventory" class="inventory-list space-y-2">
                <p class="text-gray-400 italic text-sm" id="empty-inventory-msg">No games unboxed yet. Open a case!</p>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Play Game Modal -->
    <div id="play-modal" class="fixed inset-0 hidden items-center justify-center modal-bg transition-opacity duration-300 opacity-0">
        <div class="modal-content relative transform transition-all duration-500 scale-95">
            <!-- Windows 95 Title Bar -->
            <div class="win95-titlebar">
                <span class="win95-titlebar-text" id="play-modal-title">Item Name</span>
                <button onclick="closePlayModal()" class="win95-close-btn">×</button>
            </div>
            <!-- Window Content -->
            <div class="win95-window-content">
                <div id="play-game-details" class="text-center">
                    <!-- Content inserted by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 hidden items-center justify-center modal-bg transition-opacity duration-300 opacity-0">
        <div class="modal-content relative transform transition-all duration-500 scale-95">
            <!-- Windows 95 Title Bar -->
            <div class="win95-titlebar">
                <span class="win95-titlebar-text" style="font-size: 15px;">Login</span>
                <button onclick="closeLoginModal()" class="win95-close-btn">×</button>
            </div>
            <!-- Window Content -->
            <div class="win95-window-content">
                <p class="mb-4 text-sm" style="color: var(--win95-black);">Paste your Base64 encoded Firebase private key:</p>
                <input type="password" id="firebase-token-input" placeholder="Base64 Encoded Private Key" class="w-full px-4 py-2 mb-4" style="background-color: var(--win95-white); color: var(--win95-black); border: 2px inset var(--win95-white); box-shadow: inset 1px 1px 0 var(--win95-dark-gray), inset -1px -1px 0 var(--win95-light-gray);">
                <div id="login-status" class="hidden mb-4 p-3 text-sm font-semibold"></div>
                <div class="flex justify-center">
                    <button onclick="handleLogin()" class="px-6 py-2">
                        Submit
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load Custom JS (Assumes script.js is in the same directory) -->
    <script src="script.js"></script>
</body>
</html>